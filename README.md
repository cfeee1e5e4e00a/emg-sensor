# emg-sensor
## Что тут вообще происходит?
Это либа для arduino, которая позволяет работать с датчиком ЕМГ. + скетч пример

### Как установить?
1) проверял только с установкой, которая проводилась по инструкции: [ссыл_очка](https://www.hackster.io/NYH-workshop/wemos-r32-with-arduino-startup-guide-7bc841)
2) закидываем .cpp и .h файлы в папку библиотек (создавая одноименную подпапку)
3) вуа-ля, все работает 

## Немного документации:
Все функции для работы находятся в namespace EMG

### Функции
```void init(String mac)``` - принимает mac адрес датчика, как входное значение. Код блокируется до тех пор, пока подключение не будет произведено

```float getBatteryLevel()``` - возвращает заряд акумулятора (последнее значение заряда акумулятора, которое было получено с датчика)

```float readValue()``` - возвращает одно из значений, которое лежит в архиве значений.

Поскольку датчик отправляет несколько значений, то они складируются в очереди. Затем, при получении значения, данные берутся не от датчика, а из очереди. 
Длина очереди равна 100 (если мне не изменяет память). 
В случае, если происходит попытка получения значения при пустой очереди, то основной поток блокируется до тех пор, пока значение не будет получено. 
В случае, если скорость получения данных выше, скорости их считывания, то самые старые значения, хранимые в очереди, данные удаляются. 

В EMG.cpp так же можно включить дополнительный вывод: для этого необходимо раскоментировать ```#define _PRINT_INFO_```
